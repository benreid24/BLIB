<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BLIB: include/BLIB/Containers/Grid.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BLIB
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Ben&#39;s SFML Game Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_d5c45750d16e9ad1776f541f43d69fb8.html">BLIB</a></li><li class="navelem"><a class="el" href="dir_32e9a2f6b8be632bf999c595b5284fff.html">Containers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Grid.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="a00029.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef BLIB_CONTAINERS_GRID_HPP</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define BLIB_CONTAINERS_GRID_HPP</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="a00023.html">BLIB/Containers/FastEraseVector.hpp</a>&gt;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="a00047.html">BLIB/Containers/Vector2d.hpp</a>&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="a00563.html">BLIB/Util/NonCopyable.hpp</a>&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;SFML/Graphics/Rect.hpp&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;SFML/System/Vector2.hpp&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">namespace </span><a class="code" href="a00961.html">bl</a></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;{</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">namespace </span>container</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;{</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="a01066.html">   27</a></span>&#160;<span class="keyword">class </span><a class="code" href="a01066.html">Grid</a> {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    static_assert(std::is_trivial_v&lt;T&gt;, <span class="stringliteral">&quot;Grid should only be used with trivial types&quot;</span>);</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="a01066.html#a04c46704267904d0a90f4bf3d7eb6ed4">   32</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="a01058.html">Cell</a> = <a class="code" href="a01058.html">FastEraseVector&lt;T&gt;</a>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="a01066.html#a28217449db472a1a0903a0a564059413">Grid</a>(<span class="keyword">const</span> sf::FloatRect&amp; space, <span class="keywordtype">float</span> cellWidth, <span class="keywordtype">float</span> cellHeight);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="a01066.html#a9e18a7f230a5ed2a13c49ec15ff0edf8">setSize</a>(<span class="keyword">const</span> sf::FloatRect&amp; space, <span class="keywordtype">float</span> cellWidth, <span class="keywordtype">float</span> cellHeight);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="a01066.html#a2774b087ffd848b904bf14a61d1aa41c">add</a>(<span class="keyword">const</span> sf::Vector2f&amp; pos, T value);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordtype">void</span> <span class="keyword">remove</span>(<span class="keyword">const</span> sf::Vector2f&amp; pos, T value);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="a01066.html#a2fa5322d0450317c1b4c59727f33a7d7">move</a>(<span class="keyword">const</span> sf::Vector2f&amp; oldPos, <span class="keyword">const</span> sf::Vector2f&amp; newPos, T value);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="a01066.html#a6a0a6b1f99dc52f42cc79efe28de4012">clear</a>();</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keyword">const</span> <a class="code" href="a01058.html">Cell</a>&amp; <a class="code" href="a01066.html#aa7247b33897ee7dbad8cc9a995d33f82">getCell</a>(<span class="keyword">const</span> sf::Vector2f&amp; pos);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    sf::Vector2u <a class="code" href="a01066.html#a94a6aa28adb8fde3a933d3f84dcfb4a5">getIndexAtPosition</a>(<span class="keyword">const</span> sf::Vector2f&amp; pos);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">const</span> <a class="code" href="a01058.html">Cell</a>&amp; <a class="code" href="a01066.html#a9725d9ba8c4a26cda54a44280aa25d84">getCellByIndex</a>(<span class="keyword">const</span> sf::Vector2u&amp; indices);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> TCallback&gt;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="a01066.html#a68e6fede54b340d3c05d54f2aba05573">forAllInRegion</a>(<span class="keyword">const</span> sf::FloatRect&amp; region, <span class="keyword">const</span> TCallback&amp; cb);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> TCallback&gt;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="a01066.html#a95092fa5052360b47b71241e03fe15ca">forAllInCellAndNeighbors</a>(<span class="keyword">const</span> sf::Vector2f&amp; cellPoint, <span class="keyword">const</span> TCallback&amp; cb);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    sf::Vector2f origin;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordtype">float</span> cellWidth, cellHeight;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="a01122.html">Vector2D&lt;Cell&gt;</a> cells;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordtype">void</span> doAdd(<a class="code" href="a01058.html">Cell</a>&amp; cell, T val);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordtype">void</span> doRemove(<a class="code" href="a01058.html">Cell</a>&amp; cell, T val);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;};</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="a01066.html#a28217449db472a1a0903a0a564059413">  143</a></span>&#160;<a class="code" href="a01066.html#a28217449db472a1a0903a0a564059413">Grid&lt;T&gt;::Grid</a>(<span class="keyword">const</span> sf::FloatRect&amp; space, <span class="keywordtype">float</span> cw, <span class="keywordtype">float</span> ch)</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;: origin(space.left, space.top)</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;, cellWidth(cw)</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;, cellHeight(ch)</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;, cells(<a class="code" href="a00985.html">std</a>::ceil(space.width / cw), <a class="code" href="a00985.html">std</a>::ceil(space.height / ch)) {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; cell : cells) { cell.reserve(64); }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="a01066.html#a9e18a7f230a5ed2a13c49ec15ff0edf8">  152</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01066.html#a9e18a7f230a5ed2a13c49ec15ff0edf8">Grid&lt;T&gt;::setSize</a>(<span class="keyword">const</span> sf::FloatRect&amp; space, <span class="keywordtype">float</span> cw, <span class="keywordtype">float</span> ch) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="a01066.html#a6a0a6b1f99dc52f42cc79efe28de4012">clear</a>();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    origin.x   = space.left;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    origin.y   = space.top;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    cellWidth  = cw;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    cellHeight = ch;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    cells.setSize(std::ceil(space.width / cw), std::ceil(space.height / ch));</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; cell : cells) { cell.reserve(64); }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="a01066.html#a2774b087ffd848b904bf14a61d1aa41c">  163</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01066.html#a2774b087ffd848b904bf14a61d1aa41c">Grid&lt;T&gt;::add</a>(<span class="keyword">const</span> sf::Vector2f&amp; pos, T val) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keyword">const</span> sf::Vector2u ci = <a class="code" href="a01066.html#a94a6aa28adb8fde3a933d3f84dcfb4a5">getIndexAtPosition</a>(pos);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    doAdd(cells(ci.x, ci.y), val);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01066.html">Grid&lt;T&gt;::doAdd</a>(<a class="code" href="a01058.html">Cell</a>&amp; cell, T val) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    cell.emplace_back(val);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="a01066.html#a055247b0a6e8184e08841cabd6a995fc">  174</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01066.html#a055247b0a6e8184e08841cabd6a995fc">Grid&lt;T&gt;::remove</a>(<span class="keyword">const</span> sf::Vector2f&amp; pos, T val) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keyword">const</span> sf::Vector2u ci = <a class="code" href="a01066.html#a94a6aa28adb8fde3a933d3f84dcfb4a5">getIndexAtPosition</a>(pos);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    doRemove(cells(ci.x, ci.y), val);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01066.html">Grid&lt;T&gt;::doRemove</a>(<a class="code" href="a01058.html">Cell</a>&amp; cell, T val) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = cell.begin(); it != cell.end(); ++it) {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">if</span> (*it == val) {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            cell.<a class="code" href="a01058.html#ac6424078bf8566ee5aab963214fc288f">erase</a>(it);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="a01066.html#a2fa5322d0450317c1b4c59727f33a7d7">  190</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01066.html#a2fa5322d0450317c1b4c59727f33a7d7">Grid&lt;T&gt;::move</a>(<span class="keyword">const</span> sf::Vector2f&amp; oldPos, <span class="keyword">const</span> sf::Vector2f&amp; newPos, T val) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keyword">const</span> sf::Vector2u oi = <a class="code" href="a01066.html#a94a6aa28adb8fde3a933d3f84dcfb4a5">getIndexAtPosition</a>(oldPos);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keyword">const</span> sf::Vector2u ni = <a class="code" href="a01066.html#a94a6aa28adb8fde3a933d3f84dcfb4a5">getIndexAtPosition</a>(newPos);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span> (oi == ni) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    doRemove(cells(oi.x, oi.y), val);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    doAdd(cells(ni.x, ni.y), val);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="a01066.html#a6a0a6b1f99dc52f42cc79efe28de4012">  200</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01066.html#a6a0a6b1f99dc52f42cc79efe28de4012">Grid&lt;T&gt;::clear</a>() {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; cell : cells) { cell.clear(); }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="a01066.html#aa7247b33897ee7dbad8cc9a995d33f82">  205</a></span>&#160;<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="a01058.html">Grid&lt;T&gt;::Cell</a>&amp; <a class="code" href="a01066.html#aa7247b33897ee7dbad8cc9a995d33f82">Grid&lt;T&gt;::getCell</a>(<span class="keyword">const</span> sf::Vector2f&amp; pos) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keyword">const</span> sf::Vector2u i = <a class="code" href="a01066.html#a94a6aa28adb8fde3a933d3f84dcfb4a5">getIndexAtPosition</a>(pos);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">return</span> cells(i.x, i.y);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="a01066.html#a94a6aa28adb8fde3a933d3f84dcfb4a5">  211</a></span>&#160;sf::Vector2u <a class="code" href="a01066.html#a94a6aa28adb8fde3a933d3f84dcfb4a5">Grid&lt;T&gt;::getIndexAtPosition</a>(<span class="keyword">const</span> sf::Vector2f&amp; pos) {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    sf::Vector2f v2f(pos - origin);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    v2f.x = std::max(v2f.x, 0.f);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    v2f.y = std::max(v2f.y, 0.f);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    v2f.x /= cellWidth;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    v2f.y /= cellHeight;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    sf::Vector2u v2u(v2f);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    v2u.x = std::min(v2u.x, cells.getWidth() - 1);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    v2u.y = std::min(v2u.y, cells.getHeight() - 1);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">return</span> v2u;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="a01066.html#a9725d9ba8c4a26cda54a44280aa25d84">  224</a></span>&#160;<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="a01058.html">Grid&lt;T&gt;::Cell</a>&amp; <a class="code" href="a01066.html#a9725d9ba8c4a26cda54a44280aa25d84">Grid&lt;T&gt;::getCellByIndex</a>(<span class="keyword">const</span> sf::Vector2u&amp; i) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">return</span> cells(i.x, i.y);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> TCb&gt;</div><div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="a01066.html#ab3407e6de489d81de562b1cc2d883ad8">  230</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01066.html#a68e6fede54b340d3c05d54f2aba05573">Grid&lt;T&gt;::forAllInRegion</a>(<span class="keyword">const</span> sf::FloatRect&amp; region, <span class="keyword">const</span> TCb&amp; cb) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    static_assert(std::is_invocable&lt;TCb, T&gt;::value,</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                  <span class="stringliteral">&quot;Visitor signature is void(T val) or bool(T val&quot;</span>);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">const</span> sf::Vector2u sp = <a class="code" href="a01066.html#a94a6aa28adb8fde3a933d3f84dcfb4a5">getIndexAtPosition</a>({region.left, region.top});</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keyword">const</span> sf::Vector2u ep =</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="a01066.html#a94a6aa28adb8fde3a933d3f84dcfb4a5">getIndexAtPosition</a>({region.left + region.width, region.top + region.height});</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x = sp.x; x &lt;= ep.x; ++x) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y = sp.y; y &lt;= ep.y; ++y) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <a class="code" href="a01058.html">Cell</a>&amp; cell = cells(x, y);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="keywordflow">for</span> (T val : cell) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="keywordflow">if</span> constexpr (std::is_same_v&lt;std::invoke_result_t&lt;TCb, T&gt;, <span class="keywordtype">bool</span>&gt;) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    <span class="keywordflow">if</span> (cb(val)) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                    cb(val);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> TCb&gt;</div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="a01066.html#a045fc870da66e41e4b1db568d45bb270">  254</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01066.html#a95092fa5052360b47b71241e03fe15ca">Grid&lt;T&gt;::forAllInCellAndNeighbors</a>(<span class="keyword">const</span> sf::Vector2f&amp; pos, <span class="keyword">const</span> TCb&amp; cb) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    static_assert(std::is_invocable&lt;TCb, T&gt;::value,</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                  <span class="stringliteral">&quot;Visitor signature is void(T val) or bool(T val&quot;</span>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keyword">const</span> sf::Vector2u i  = <a class="code" href="a01066.html#a94a6aa28adb8fde3a933d3f84dcfb4a5">getIndexAtPosition</a>(pos);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sx = i.x &gt; 0 ? i.x - 1 : 0;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ex = i.x &lt; cells.getWidth() - 2 ? i.x + 1 : cells.getWidth() - 1;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sy = i.y &gt; 0 ? i.y - 1 : 0;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ey = i.y &lt; cells.getHeight() - 2 ? i.y + 1 : cells.getHeight() - 1;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x = sx; x &lt;= ex; ++x) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y = sy; y &lt;= ey; ++y) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <a class="code" href="a01058.html">Cell</a>&amp; cell = cells(x, y);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="keywordflow">for</span> (T val : cell) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                <span class="keywordflow">if</span> constexpr (std::is_same_v&lt;std::invoke_result_t&lt;TCb, T&gt;, <span class="keywordtype">bool</span>&gt;) {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                    <span class="keywordflow">if</span> (cb(val)) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                    cb(val);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;} <span class="comment">// namespace container</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;} <span class="comment">// namespace bl</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="a01066_html_a055247b0a6e8184e08841cabd6a995fc"><div class="ttname"><a href="a01066.html#a055247b0a6e8184e08841cabd6a995fc">bl::container::Grid::remove</a></div><div class="ttdeci">void remove(const sf::Vector2f &amp;pos, T value)</div><div class="ttdoc">Removes an entity to the grid at the given position. </div><div class="ttdef"><b>Definition:</b> <a href="a00029_source.html#l00174">Grid.hpp:174</a></div></div>
<div class="ttc" id="a01066_html_aa7247b33897ee7dbad8cc9a995d33f82"><div class="ttname"><a href="a01066.html#aa7247b33897ee7dbad8cc9a995d33f82">bl::container::Grid::getCell</a></div><div class="ttdeci">const Cell &amp; getCell(const sf::Vector2f &amp;pos)</div><div class="ttdoc">Returns the cell at the given position in spacial units. </div><div class="ttdef"><b>Definition:</b> <a href="a00029_source.html#l00205">Grid.hpp:205</a></div></div>
<div class="ttc" id="a01122_html"><div class="ttname"><a href="a01122.html">bl::container::Vector2D</a></div><div class="ttdoc">Utility class that wraps std::vector, making it indexable in two dimensions. </div><div class="ttdef"><b>Definition:</b> <a href="a00047_source.html#l00016">Vector2d.hpp:16</a></div></div>
<div class="ttc" id="a01066_html_a2fa5322d0450317c1b4c59727f33a7d7"><div class="ttname"><a href="a01066.html#a2fa5322d0450317c1b4c59727f33a7d7">bl::container::Grid::move</a></div><div class="ttdeci">void move(const sf::Vector2f &amp;oldPos, const sf::Vector2f &amp;newPos, T value)</div><div class="ttdoc">Moves the given value from it&amp;#39;s old position in the grid to the new position. </div><div class="ttdef"><b>Definition:</b> <a href="a00029_source.html#l00190">Grid.hpp:190</a></div></div>
<div class="ttc" id="a00047_html"><div class="ttname"><a href="a00047.html">Vector2d.hpp</a></div></div>
<div class="ttc" id="a01066_html_a9e18a7f230a5ed2a13c49ec15ff0edf8"><div class="ttname"><a href="a01066.html#a9e18a7f230a5ed2a13c49ec15ff0edf8">bl::container::Grid::setSize</a></div><div class="ttdeci">void setSize(const sf::FloatRect &amp;space, float cellWidth, float cellHeight)</div><div class="ttdoc">Resizes the grid. Stored elements are cleared. </div><div class="ttdef"><b>Definition:</b> <a href="a00029_source.html#l00152">Grid.hpp:152</a></div></div>
<div class="ttc" id="a01066_html_a2774b087ffd848b904bf14a61d1aa41c"><div class="ttname"><a href="a01066.html#a2774b087ffd848b904bf14a61d1aa41c">bl::container::Grid::add</a></div><div class="ttdeci">void add(const sf::Vector2f &amp;pos, T value)</div><div class="ttdoc">Adds an entity to the grid at the given position. </div><div class="ttdef"><b>Definition:</b> <a href="a00029_source.html#l00163">Grid.hpp:163</a></div></div>
<div class="ttc" id="a00023_html"><div class="ttname"><a href="a00023.html">FastEraseVector.hpp</a></div></div>
<div class="ttc" id="a01066_html_a28217449db472a1a0903a0a564059413"><div class="ttname"><a href="a01066.html#a28217449db472a1a0903a0a564059413">bl::container::Grid::Grid</a></div><div class="ttdeci">Grid(const sf::FloatRect &amp;space, float cellWidth, float cellHeight)</div><div class="ttdoc">Creates the grid. </div><div class="ttdef"><b>Definition:</b> <a href="a00029_source.html#l00143">Grid.hpp:143</a></div></div>
<div class="ttc" id="a01066_html_a6a0a6b1f99dc52f42cc79efe28de4012"><div class="ttname"><a href="a01066.html#a6a0a6b1f99dc52f42cc79efe28de4012">bl::container::Grid::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Removes all elements. All iterators invalidated. Grid size is unchanged. </div><div class="ttdef"><b>Definition:</b> <a href="a00029_source.html#l00200">Grid.hpp:200</a></div></div>
<div class="ttc" id="a01066_html_a94a6aa28adb8fde3a933d3f84dcfb4a5"><div class="ttname"><a href="a01066.html#a94a6aa28adb8fde3a933d3f84dcfb4a5">bl::container::Grid::getIndexAtPosition</a></div><div class="ttdeci">sf::Vector2u getIndexAtPosition(const sf::Vector2f &amp;pos)</div><div class="ttdoc">Returns the 0-based cell index containing the given spacial position. Returned value is bounded to th...</div><div class="ttdef"><b>Definition:</b> <a href="a00029_source.html#l00211">Grid.hpp:211</a></div></div>
<div class="ttc" id="a01066_html_a68e6fede54b340d3c05d54f2aba05573"><div class="ttname"><a href="a01066.html#a68e6fede54b340d3c05d54f2aba05573">bl::container::Grid::forAllInRegion</a></div><div class="ttdeci">void forAllInRegion(const sf::FloatRect &amp;region, const TCallback &amp;cb)</div><div class="ttdoc">Iterates over all contained values within the given region. Callback can optionally return a boolean ...</div></div>
<div class="ttc" id="a00563_html"><div class="ttname"><a href="a00563.html">NonCopyable.hpp</a></div></div>
<div class="ttc" id="a01066_html_a9725d9ba8c4a26cda54a44280aa25d84"><div class="ttname"><a href="a01066.html#a9725d9ba8c4a26cda54a44280aa25d84">bl::container::Grid::getCellByIndex</a></div><div class="ttdeci">const Cell &amp; getCellByIndex(const sf::Vector2u &amp;indices)</div><div class="ttdoc">Returns the cell at the given x and y indices. </div><div class="ttdef"><b>Definition:</b> <a href="a00029_source.html#l00224">Grid.hpp:224</a></div></div>
<div class="ttc" id="a00961_html"><div class="ttname"><a href="a00961.html">bl</a></div><div class="ttdoc">The parent namespace for all of BLIB. </div><div class="ttdef"><b>Definition:</b> <a href="a00005_source.html#l00017">PathFinder.hpp:17</a></div></div>
<div class="ttc" id="a01058_html"><div class="ttname"><a href="a01058.html">bl::container::FastEraseVector</a></div><div class="ttdoc">A thin reskin of std::vector, this vector replaces the O(n) erase() methods of vector with a constant...</div><div class="ttdef"><b>Definition:</b> <a href="a00023_source.html#l00022">FastEraseVector.hpp:22</a></div></div>
<div class="ttc" id="a01066_html_a95092fa5052360b47b71241e03fe15ca"><div class="ttname"><a href="a01066.html#a95092fa5052360b47b71241e03fe15ca">bl::container::Grid::forAllInCellAndNeighbors</a></div><div class="ttdeci">void forAllInCellAndNeighbors(const sf::Vector2f &amp;cellPoint, const TCallback &amp;cb)</div><div class="ttdoc">Iterates over all contained values within the cell and it&amp;#39;s neighbors. Callback can optionally return...</div></div>
<div class="ttc" id="a01066_html"><div class="ttname"><a href="a01066.html">bl::container::Grid</a></div><div class="ttdoc">Basic spatial partioning grid class for breaking down areas into equal sized boxes. Grid is meant only to point to objects stored elsewhere, however all trivial types are allowed. Contained values should be unique, otherwise move() and remove() may behave unexpectedly. </div><div class="ttdef"><b>Definition:</b> <a href="a00029_source.html#l00027">Grid.hpp:27</a></div></div>
<div class="ttc" id="a01058_html_ac6424078bf8566ee5aab963214fc288f"><div class="ttname"><a href="a01058.html#ac6424078bf8566ee5aab963214fc288f">bl::container::FastEraseVector::erase</a></div><div class="ttdeci">void erase(iterator position)</div><div class="ttdoc">Erase a single element using an iterator. </div><div class="ttdef"><b>Definition:</b> <a href="a00023_source.html#l00044">FastEraseVector.hpp:44</a></div></div>
<div class="ttc" id="a00985_html"><div class="ttname"><a href="a00985.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="a00407_source.html#l00038">Node.hpp:38</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 22 2022 21:50:18 for BLIB by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
