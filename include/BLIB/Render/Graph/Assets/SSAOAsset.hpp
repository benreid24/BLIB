#ifndef BLIB_RENDER_GRAPH_ASSETS_SSAOASSET_HPP
#define BLIB_RENDER_GRAPH_ASSETS_SSAOASSET_HPP

#include <BLIB/Render/Config/RenderPassIds.hpp>
#include <BLIB/Render/Graph/AssetTags.hpp>
#include <BLIB/Render/Graph/Assets/GenericTargetAsset.hpp>

namespace bl
{
namespace rc
{
namespace rgi
{
/**
 * @brief Shader resource for the SSAO pass output
 *
 * @ingroup Renderer
 */
using SSAOShaderResource = sri::AttachmentImageSetResource<
    1, std::array<vk::SemanticTextureFormat, 1>{vk::SemanticTextureFormat::SingleChannelUnorm8},
    std::array<VkImageUsageFlags, 1>{VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT |
                                     VK_IMAGE_USAGE_SAMPLED_BIT},
    sri::TargetSize(sri::TargetSize::ObserverSize), sri::MSAABehavior::Disabled>;

/**
 * @brief Shader resource key for the SSAO pass output
 *
 * @ingroup Renderer
 */
constexpr sr::Key<SSAOShaderResource> SSAOShaderResourceKey =
    makeShaderResourceKey<SSAOShaderResource>(rg::AssetTags::SSAOBuffer);

/**
 * @brief Asset for a single channel attachment generated by the SSAO pass
 *
 * @ingroup Renderer
 */
using SSAOAsset =
    GenericTargetAsset<SSAOShaderResource, sr::StoreKey::Observer, cfg::RenderPassIds::SSAOPass,
                       RenderPassBehavior::StartedByTask, DepthAttachmentType::None>;

} // namespace rgi
} // namespace rc
} // namespace bl

#endif
